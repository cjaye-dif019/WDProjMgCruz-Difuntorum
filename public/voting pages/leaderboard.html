<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Leaderboard | Pillars of Excellence</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(180deg,#4c8bf5,#3a43d6);
  color:#fff;
}

/*header*/
header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:rgba(251,251,251,.7);
  backdrop-filter:blur(12px);
  padding:18px 40px;
  position:sticky;
  top:0;
  z-index:1000;
}

.logo-title{
  display:flex;
  align-items:center;
  gap:12px;
}
.logo-title img{width:55px}
.menu{font-size:32px;font-weight:900}

/*menu*/
.nav-menu {
position: absolute;
top: 85px;
right: 40px;
width: 230px;
background: #e4d2a8;
border-radius: 15px;
padding: 10px 0;
display: none;
flex-direction: column;
box-shadow: 0 4px 20px rgba(0,0,0,0.25);
animation: fadeIn 0.25s ease-out;
}

.nav-menu a {
padding: 15px 22px;
text-decoration: none;
color: #000;
font-weight: 700;
border-bottom: 1px solid rgba(0,0,0,0.15);
transition: 0.2s;
}

.nav-menu a:last-child {
border-bottom: none;
}

.nav-menu a:hover {
background: rgba(255,255,255,0.45);
padding-left: 28px;
}


.container{
  max-width:1200px;
  margin:auto;
  padding:40px 30px 80px;
}

.section{
  background:#3e63d9;
  border-radius:28px;
  padding:30px;
  margin-bottom:40px;
}

.section-title{
  background:#45c4ff;
  padding:14px 22px;
  border-radius:20px;
  font-weight:800;
  margin-bottom:25px;
  color:#000;
}

.rank{
  background:#fffcd6;
  color:#000;
  padding:14px 20px;
  border-radius:18px;
  margin-bottom:12px;
  font-weight:700;
}

.subject-title{
  margin-top:25px;
  margin-bottom:10px;
  font-weight:800;
  text-transform:uppercase;
}


/* footer */
footer{
  padding:30px 50px;
  display:flex;
  justify-content:space-between;
  background:rgba(251,251,251,.3);
  backdrop-filter:blur(12px);
}
</style>
</head>

<body>

    <header>
        <div class="logo-title">
        <img src="../readme images/logo.png" />
            <div>
                <div style="font-size: 26px; font-weight: 800;">Pillars of Excellence</div>
                <div>Teachers of Pisay</div>
            </div>
        </div>

        <div class="menu" onclick="toggleMenu()">☰</div>
    </header>

    <!-- menu -->
    <div id="menuDropdown" class="nav-menu">
        <a href="../main_page.html">Home Page</a>
        <a href="../public/teachers.html">Teachers' Page</a>
        <a href="../public/voting.html">Vote for Teacher</a>
        <a href="../public/leaderboard.html">Leaderboard</a>
    </div>
<div class="container">

  <!-- BEST OVERALL -->
  <div class="section">
    <div class="section-title">BEST OVERALL</div>
    <div id="bestOverall"></div>
  </div>

  <!-- PER SUBJECT -->
  <div class="section">
    <div class="section-title">TITO OF PISAY</div>
    <div id="tito"></div>
  </div>

  <div class="section">
    <div class="section-title">TITA OF PISAY</div>
    <div id="tita"></div>
  </div>

  <div class="section">
    <div class="section-title">TITA OF PISAY</div>
    <div id="tita"></div>
  </div>

  <div class="section">
    <div class="section-title">BEST ENERGY IN CLASS</div>
    <div id="energyinclass"></div>
  </div>
  <div class="section">
    <div class="section-title">BEST HANDWRITING</div>
    <div id="handwriting"></div>
  </div>
  <div class="section">
    <div class="section-title">BEST LECTURER</div>
    <div id="lecturer"></div>
  </div>
  <div class="section">
    <div class="section-title">BEST STORYTELLER</div>
    <div id="storyteller"></div>
  </div>
  <div class="section">
    <div class="section-title">BEST TEST DESIGNER</div>
    <div id="testdesigner"></div>
  </div>
  <div class="section">
    <div class="section-title">MOST APPROCHABLE</div>
    <div id="approachable"></div>
  </div>
  <div class="section">
    <div class="section-title">MOST FASHIONABLE</div>
    <div id="fashionable"></div>
  </div>
  <div class="section">
    <div class="section-title">MOST INSPIRING</div>
    <div id="inspiring"></div>
  </div><div class="section">
    <div class="section-title">MOST ORGANIZED</div>
    <div id="organized"></div>
  </div><div class="section">
    <div class="section-title">MOST PASSIONATE ABOUT TEACHING</div>
    <div id="passionateaboutteaching"></div>
  </div><div class="section">
    <div class="section-title">MOST PATIENT</div>
    <div id="patient"></div>
  </div><div class="section">
    <div class="section-title">MOST RELATABLE</div>
    <div id="relatable"></div>


</div>


<footer>
  <div>Pillars of Excellence<br>© SCA CRUZ & CJA DIFUNTORUM</div>
  <div>Contact: 01234567890</div>
</footer>

<script src="teacher_name.js"></script>
<script src="voting_year.js"></script>
<script>


 function toggleMenu() {
            const menu = document.getElementById("menuDropdown");
            menu.style.display = menu.style.display === "flex" ? "none" : "flex";
        }

const data = JSON.parse(localStorage.getItem("categoryVotes")) || {};
const CATEGORY = "TITO OF PISAY";

function getOverallWinners(limit = 5){
  const totals = {};

  if(!data[CATEGORY]) return [];

  Object.values(data[CATEGORY]).forEach(subject=>{
    Object.entries(subject).forEach(([teacher, count])=>{
      totals[teacher] = (totals[teacher] || 0) + count;
    });
  });

  return Object.entries(totals)
    .sort((a,b)=>b[1]-a[1])
    .slice(0,limit);

    
}

/* overall best*/
const overallDiv = document.getElementById("bestOverall");
const overall = getOverallWinners();

if(overall.length === 0){
  overallDiv.innerHTML = "<p>No votes yet.</p>";
}else{
  overall.forEach((t,i)=>{
    overallDiv.innerHTML += `
      <div class="rank">
        ${i+1}. ${t[0]} 
      </div>`;
  });
}

/*per category best*/
function renderCategory(categoryName, containerId){
  const container = document.getElementById(containerId);

  if(!data[categoryName]){
    container.innerHTML = "<p>No votes yet.</p>";
    return;
  }

  const years = ["FYP","AYP","SYP","FYP & SYP","FYP & AYP","AYP & SYP"];

  years.forEach(year => {

    let yearVotes = {};

    Object.entries(data[categoryName]).forEach(([subject, teachers])=>{
      Object.entries(teachers).forEach(([teacher, votes])=>{

        if(teacherYear[teacher] === year){
          if(!yearVotes[teacher]){
            yearVotes[teacher] = {
              votes: 0,
              subject: subject.replace(/_/g," ")
            };
          }
          yearVotes[teacher].votes += votes;
        }

      });
    });

    const sorted = Object.entries(yearVotes)
      .sort((a,b)=>b[1].votes - a[1].votes)
      .slice(0,5);

    if(sorted.length === 0) return;

    container.innerHTML += `
      <div class="subject-title">${year} TEACHERS</div>
    `;

    sorted.forEach((t,i)=>{
      container.innerHTML += `
        <div class="rank">
          ${i+1}. ${t[0]} (${t[1].subject})
        </div>
      `;
    });

  });
}


renderCategory("TITO OF PISAY", "tito");
renderCategory("TITA OF PISAY", "tita");
renderCategory("BEST ENERGY IN CLASS", "energyinclass");
renderCategory("BEST HANDWRITING", "handwriting");
renderCategory("BEST LECTURER", "lecturer");
renderCategory("BEST STORYTELLER", "storyteller");
renderCategory("BEST TEST DESIGNER", "testdesigner");
renderCategory("MOST APPROCHABLE", "approachable");
renderCategory("MOST FASHIONABLE", "fashionable");
renderCategory("MOST INSPIRING", "inspiring");
renderCategory("MOST ORGANIZED", "organized");
renderCategory("MOST PASSIONATE ABOUT TEACHING", "passionateaboutteaching");
renderCategory("MOST PATIENT", "patient");
renderCategory("MOST RELATABLE", "relatable");



</script>

</body>
</html>
